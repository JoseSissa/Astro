---
import LaVeladaLogo from "@/icons/la-velada.astro"
---
<section class="flex flex-col justify-center items-center my-32 gap-y-10">
    <LaVeladaLogo class="text-primary" />

    <div class="flex gap-x-1 text-primary uppercase font-semibold">
        <div class="flex flex-col justify-center items-center w-16 gap-y-2">
            <span class="text-4xl tabular-nums" data-days>00</span>
            <span class="text-xs text-center">Dias</span>
        </div>
        <span aria-hidden="true" class="mt-1 text-xl">:</span>
        <div class="flex flex-col justify-center items-center w-16 gap-y-2">
            <span class="text-4xl tabular-nums" data-hours>00</span>
            <span class="text-xs text-center">Horas</span>
        </div>
        <span aria-hidden="true" class="mt-1 text-xl">:</span>
        <div class="flex flex-col justify-center items-center w-16 gap-y-2">
            <span class="text-4xl tabular-nums" data-minutes>00</span>
            <span class="text-xs text-center">Minutos</span>
        </div>
        <span aria-hidden="true" class="mt-1 text-xl">:</span>
        <div class="flex flex-col justify-center items-center w-16 gap-y-2">
            <span class="text-4xl tabular-nums" data-seconds>00</span>
            <span class="text-xs text-center">Segundos</span>
        </div>
    </div>
</section>

<script>
    // Fecha final del contador, transformada en milisegundos
    const END_DATE = new Date('Sat Oct 19 2024 18:00:00').getTime();
    // CONTANTES
    const SECOND = 1000
    const MINUTE = SECOND * 60
    const HOUR = MINUTE * 60
    const DAY = HOUR * 24

    const days = document.querySelector('[data-days]')
    const hours = document.querySelector('[data-hours]')
    const minutes = document.querySelector('[data-minutes]')
    const seconds = document.querySelector('[data-seconds]')

    const formatNumber = (num: number) => {
        return Math.floor(num).toString().padStart(2, '0')
    }

    const updateCountDown = () => {
        if(days instanceof HTMLElement) days.innerText = formatNumber((END_DATE - Date.now()) / DAY)
        if(hours instanceof HTMLElement) hours.innerText = formatNumber(((END_DATE - Date.now()) % DAY) / HOUR)
        if(minutes instanceof HTMLElement) minutes.innerText = formatNumber(((END_DATE - Date.now()) % HOUR) / MINUTE)
        if(seconds instanceof HTMLElement) seconds.innerText = formatNumber(((END_DATE - Date.now()) % MINUTE) / SECOND)
    }

    updateCountDown()
    setInterval(updateCountDown, SECOND)

    
</script>