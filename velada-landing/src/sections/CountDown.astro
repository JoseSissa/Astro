---
import LaVeladaLogo from "@/icons/la-velada.astro"
---
<section class="flex flex-col justify-center items-center my-32">
    <LaVeladaLogo class="text-primary" />

    <div>
        <div>
            <span data-days>00</span>
            <span>Dias</span>
        </div>
        <div>
            <span data-hours>00</span>
            <span>Horas</span>
        </div>
        <div>
            <span data-minutes>00</span>
            <span>Minutos</span>
        </div>
        <div>
            <span data-seconds>00</span>
            <span>Segundos</span>
        </div>
    </div>
</section>

<script>
    // Fecha final del contador, transformada en milisegundos
    const END_DATE = new Date('Sat Oct 19 2024 18:00:00').getTime();
    // CONTANTES
    const SECOND = 1000
    const MINUTE = SECOND * 60
    const HOUR = MINUTE * 60
    const DAY = HOUR * 24

    const days = document.querySelector('[data-days]')
    const hours = document.querySelector('[data-hours]')
    const minutes = document.querySelector('[data-minutes]')
    const seconds = document.querySelector('[data-seconds]')

    const formatNumber = (num: number) => {
        return Math.floor(num).toString().padStart(2, '0')
    }

    const updateCountDown = () => {
        if(days instanceof HTMLElement) days.innerText = formatNumber((END_DATE - Date.now()) / DAY)
        if(hours instanceof HTMLElement) hours.innerText = formatNumber(((END_DATE - Date.now()) % DAY) / HOUR)
        if(minutes instanceof HTMLElement) minutes.innerText = formatNumber(((END_DATE - Date.now()) % HOUR) / MINUTE)
        if(seconds instanceof HTMLElement) seconds.innerText = formatNumber(((END_DATE - Date.now()) % MINUTE) / SECOND)
    }
    
    setInterval(updateCountDown, SECOND)
    
</script>